<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOD Dashboard</title>
</head>
<body>
    <h2>HOD: <%= hod.head %></h2>
    <h2>Department: <%= department.name %></h2>

    <h2>Manage Years for <%= department.name %></h2>
    <form action="/departments/<%= department._id %>/years/add" method="post">
        <select name="year">
            <option value="">Select Year</option>
            <option value="<%= `First Year - ${department.name}` %>"><%= `First Year - ${department.name}` %></option>
            <option value="<%= `Second Year - ${department.name}` %>"><%= `Second Year - ${department.name}` %></option>
            <option value="<%= `Third Year - ${department.name}` %>"><%= `Third Year - ${department.name}` %></option>
            <option value="<%= `Fourth Year - ${department.name}` %>"><%= `Fourth Year - ${department.name}` %></option>
        </select>
        <button type="submit">Add Year</button>
    </form>

    <table border="1">
        <thead>
            <tr>
                <th>Year Name</th>
                <th>Manage Year</th>
            </tr>
        </thead>
        <tbody>
            <% years.forEach(function(year) { %>
                <tr>
                    <td><%= year.year %></td>
                    <td><a href="/years/<%= year._id %>/divisions">Manage</a></td>
                </tr>
            <% }); %>
        </tbody>
    </table>

    <br><br>

    <h2>Pending Faculty Requests</h2>

    <% if (pendingRequests.length > 0) { %>
        <table border="1">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Department</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <% pendingRequests.forEach(function(faculty) { %>
                    <tr>
                        <td><%= faculty.name %></td>
                        <td><%= faculty.email %></td>
                        <td><%= faculty.department %></td>
                        <td>
                            <form action="/hod/approve/<%= faculty._id %>" method="post">
                                <button type="submit">Approve</button>
                            </form>
                            <form action="/hod/deny/<%= faculty._id %>" method="post">
                                <button type="submit">Deny</button>
                            </form>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    <% } else { %>
        <p>No pending requests.</p>
    <% } %>
</body>
</html>
